<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Automoy</title>

    <!-- modern font & basic reset  -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <style>
      /* -------  GLOBAL  ------- */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: "Inter", sans-serif;
        background: #000; /* full‑black like the mock‑up */
        color: #fff;
      }

      /* top nav  */
      .top-nav {
        display: flex;
        gap: 32px;
        padding: 12px 32px;
        border-bottom: 1px solid #222;
        font-size: 14px;
        letter-spacing: 0.02em;
      }
      .top-nav span {
        cursor: pointer;
        transition: color 0.2s;
      }
      .top-nav span:hover {
        color: #50a7ff;
      }

      /* main grid  */
      .main-flex {
        display: flex;
        height: calc(100% - 49px); /* subtract nav */
      }

      /* ---- left column ---- */
      .left-panel {
        width: 380px;
        display: flex;
        flex-direction: column;
        padding: 32px 28px;
        border-right: 1px solid #222;
      }
      .logo-title-row {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 32px;
      }
      .logo-img {
        width: 34px;
        height: 34px;
        object-fit: contain;
      }
      .title-separator {
        font-size: 30px;
        line-height: 1;
        font-weight: 200;
        color: #fff;
      }
      .main-title {
        font-size: 28px;
        font-weight: 600;
        letter-spacing: 0.03em;
      }
      .objective-display {
        font-size: 15px;
        margin-bottom: 24px;
        color: #50a7ff;
      }

      /* reasoning blocks */
      .reasoning-block {
        flex: 1;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 28px;
        padding-right: 8px; /* scrollbar room */
      }
      .reasoning-label {
        font-weight: 600;
        font-size: 15px;
        margin-bottom: 6px;
      }
      .reasoning-section span:not(.reasoning-label) {
        font-size: 15px;
        line-height: 1.6;
      }

      /* objective input */
      .objective-form {
        display: flex;
        gap: 0;
        border-top: 1px solid #222;
        padding-top: 18px;
      }
      #objectiveInput {
        flex: 1;
        font-size: 15px;
        padding: 10px 14px;
        border: none;
        border-radius: 4px 0 0 4px;
        background: #111;
        color: #fff;
      }
      #objectiveInput::placeholder {
        color: #666;
      }
      .send-btn {
        width: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        border: none;
        border-radius: 0 4px 4px 0;
        background: #222;
        color: #fff;
        cursor: pointer;
        transition: background 0.2s;
      }
      .send-btn:hover {
        background: #50a7ff;
      }

      /* coords display */
      .coords-display {
        font-size: 15px;
        color: #666;
        margin-top: 8px;
      }

      /* ---- right column ---- */
      .right-panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 32px 28px;
      }
      .spatial-title {
        font-size: 28px;
        font-weight: 600;
        margin-bottom: 24px;
      }
      .screenshot-container {
        flex: 1;
        border: 1px solid #333;
        border-radius: 6px;
        background: #000;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 24px;
        overflow: hidden;
      }
      .screenshot-img {
        max-width: 100%;
        max-height: 100%;
      }

      /* operations row */
      .operation-row {
        display: flex;
        align-items: center;
        gap: 40px;
        border-top: 1px solid #222;
        padding-top: 18px;
      }
      .operation-label {
        font-weight: 600;
        margin-right: 6px;
      }
      .pause-btn {
        margin-left: auto;
        width: 50px;
        aspect-ratio: 1 / 1;
        height: auto;
        box-sizing: border-box;
        border: 4px solid #fff;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: opacity 0.2s;
      }
      .pause-btn img {
        max-width: 60%;
        height: auto;
        filter: invert(1);
      }
      .pause-btn:hover {
        opacity: 0.7;
      }

      /* scrollbar (webkit) */
      ::-webkit-scrollbar {
        width: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: #444;
        border-radius: 4px;
      }
    </style>
  </head>

  <body>
    <!-- ========= NAV ========= -->
    <div class="top-nav">
      <span>Help</span><span>Configuration</span><span>Settings</span>
    </div>

    <!-- ========= LAYOUT ========= -->
    <div class="main-flex">
      <!-- LEFT PANEL -->
      <div class="left-panel">
        <!-- branding -->
        <div class="logo-title-row">
          <img src="/static/imgs/logo.png" alt="Logo" class="logo-img" />
          <span class="title-separator"></span>
          <h1 class="main-title">Automoy</h1>
        </div>

        <!-- User Goal Display -->
        <div class="reasoning-section">
            <div class="reasoning-label">User Goal:</div>
            <span id="userGoalDisplay">Enter your goal below and press Send.</span>
        </div>

        <!-- Formulated Objective Display -->
        <div class="reasoning-section" style="margin-top: 16px;">
            <div class="reasoning-label">AI Formulated Objective:</div>
            <span id="formulatedObjectiveDisplay">Waiting for AI...</span>
        </div>
        
        <div class="reasoning-block" style="margin-top: 24px;">
          <div class="reasoning-section">
            <div class="reasoning-label">Visual Analysis:</div>
            <span id="visualAnalysisDisplay">Waiting for visual analysis...</span>
          </div>
          <div class="reasoning-section">
            <div class="reasoning-label">Thinking Process:</div>
            <span id="thinkingProcessDisplay">Waiting for thinking process...</span>
          </div>
          <div class="reasoning-section">
            <div class="reasoning-label">Steps Generated:</div>
            <ul id="stepsGeneratedList">
              <li>No steps generated yet.</li>
            </ul>
          </div>

          <div class="reasoning-section">
            <div class="reasoning-label">Operations Generated:</div>
            <pre id="operationsGeneratedText">Waiting for operations...</pre>
          </div>

        </div>

        <!-- Goal Input Form -->
        <form id="goalForm" class="objective-form">
          <input
            type="text"
            id="goalInput"
            placeholder="Enter your goal for Automoy..."
          />
          <button type="submit" class="send-btn">&#10148;</button>
        </form>
        <!-- <div id="coordsDisplay" class="coords-display">Coords: N/A</div> -->
      </div>

      <!-- RIGHT PANEL -->
      <div class="right-panel">
        <div class="spatial-title">Spatial Analysis</div>
        <div class="screenshot-container">
          <div
            id="screenshotPlaceholder"
            class="coords-display"
            style="display:flex;align-items:center;justify-content:center;flex:1;color:#666;font-size:18px;"
          >
            Waiting for frame
          </div>
          <img
            id="screenshotImage"
            class="screenshot-img"
            src=""
            alt="Processed Screenshot"
            style="display:none; max-width:100%; max-height:100%;"
            onload="console.log('Screenshot loaded')"
            onerror="console.error('Screenshot failed to load')"
          />
        </div>

        <div class="operation-row">
          <div class="operation-status">
          <div class="operation-label">Current:</div>
          <span id="currentOperationDisplay">Idle</span>
        </div>
        <div class="operation-status">
          <div class="operation-label">Past:</div>
          <span id="pastOperationDisplay">None</span>
        </div>
        <!-- LLM Query, Response, Execution Result (Optional) -->
        <!-- These can be added if detailed LLM interaction display is needed -->
        <!-- <div class="operation-status">
          <div class="operation-label">LLM Query:</div>
          <span id="llmQueryDisplay"></span>
        </div>
        <div class="operation-status">
          <div class="operation-label">LLM Response:</div>
          <span id="llmResponseDisplay"></span>
        </div>
        <div class="operation-status">
          <div class="operation-label">Execution Result:</div>
          <span id="executionResultDisplay"></span>
        </div> -->
        <div class="pause-btn" id="pauseButton" title="Toggle Pause/Resume">
            <img id="pauseIcon" src="/static/imgs/pause_icon.png" alt="Pause" />
        </div>
      </div>
    </div>
    <script src="/static/script.js"></script>
  </body>
</html>
